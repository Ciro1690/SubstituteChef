{"ast":null,"code":"import _defineProperty from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router';import{registerJob}from'../utilities/utility';import{TextField,MenuItem,Select,InputLabel,Button}from'@material-ui/core';import\"../../styles/Register.css\";import ChefApi from'../api/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var JobSignUp=function JobSignUp(_ref){var currentUser=_ref.currentUser;var INITIAL_DATA={position:\"\",hourlyPay:\"\",date:\"\",companyId:\"\"};var _useState=useState(INITIAL_DATA),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),companies=_useState6[0],setCompanies=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoaded=_useState8[0],setIsLoaded=_useState8[1];var history=useHistory();useEffect(function(){function getCompanies(){return _getCompanies.apply(this,arguments);}function _getCompanies(){_getCompanies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var companyList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ChefApi.getCompaniesFromUsername(currentUser);case 2:companyList=_context.sent;setCompanies(companyList.companies);setIsLoaded(true);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getCompanies.apply(this,arguments);}getCompanies();},[currentUser]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var registerData,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();registerData={\"position\":formData.position,\"hourlyPay\":formData.hourlyPay,\"date\":formData.date,\"companyId\":formData.companyId};_context2.next=4;return registerJob(registerData);case 4:result=_context2.sent;setFormData(INITIAL_DATA);if(result.success){alert(\"Added new job\");history.push(\"/\");}else{setErrors(result.errors);}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});};return companies.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Post a Job\"}),!isLoaded?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):null,/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Company\"}),/*#__PURE__*/_jsx(Select,{required:true,displayEmpty:true,label:\"Company\",name:\"companyId\",value:formData.companyId,onChange:handleChange,children:companies.map(function(company){return/*#__PURE__*/_jsx(MenuItem,{value:company.id,children:company.name},company.id);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{required:true,label:\"Position\",type:\"text\",name:\"position\",onChange:handleChange,value:formData.position}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{required:true,label:\"Hourly Pay\",type:\"number\",min:\"14\",name:\"hourlyPay\",onChange:handleChange,value:formData.hourlyPay}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{required:true,type:\"date\",label:\"Date\",name:\"date\",onChange:handleChange,value:formData.date,InputLabelProps:{shrink:true}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"secondary\",children:\"Post Job\"}),/*#__PURE__*/_jsx(\"div\",{children:errors.length?/*#__PURE__*/_jsx(\"p\",{children:errors}):null})]})]}):/*#__PURE__*/_jsx(\"h1\",{children:\"Register a company to post a job\"});};export default JobSignUp;","map":{"version":3,"sources":["/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/src/components/jobs/JobSignup.js"],"names":["React","useState","useEffect","useHistory","registerJob","TextField","MenuItem","Select","InputLabel","Button","ChefApi","JobSignUp","currentUser","INITIAL_DATA","position","hourlyPay","date","companyId","formData","setFormData","errors","setErrors","companies","setCompanies","isLoaded","setIsLoaded","history","getCompanies","getCompaniesFromUsername","companyList","handleSubmit","e","preventDefault","registerData","result","success","alert","push","handleChange","target","name","value","data","length","map","company","id","shrink"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { registerJob } from '../utilities/utility';\nimport {\n    TextField,\n    MenuItem,\n    Select,\n    InputLabel,\n    Button\n} from '@material-ui/core'; \nimport \"../../styles/Register.css\"\nimport ChefApi from '../api/api';\n\nconst JobSignUp = ({ currentUser }) => {\n\n    const INITIAL_DATA = {\n        position: \"\",\n        hourlyPay: \"\", \n        date: \"\",\n        companyId: \"\"\n    };\n\n    const [formData, setFormData] = useState(INITIAL_DATA);\n    const [errors, setErrors] = useState([]);\n    const [companies, setCompanies] = useState([]);\n    const [isLoaded, setIsLoaded] = useState(false);\n    let history = useHistory();\n\n    useEffect(() => {\n        async function getCompanies() {\n            let companyList = await ChefApi.getCompaniesFromUsername(currentUser);\n            setCompanies(companyList.companies);\n            setIsLoaded(true);\n        }\n        getCompanies();\n    }, [currentUser]);\n\n    const handleSubmit = async e => {\n        e.preventDefault();\n        const registerData = {\n            \"position\": formData.position,\n            \"hourlyPay\":formData.hourlyPay,\n            \"date\": formData.date,\n            \"companyId\": formData.companyId         \n        };\n        const result = await registerJob(registerData)\n        setFormData(INITIAL_DATA);\n        \n        if (result.success) {\n            alert(\"Added new job\")\n            history.push(\"/\");\n        } else {\n            setErrors(result.errors);\n        }\n    }\n    const handleChange = e => {\n        const {name, value} = e.target;\n        setFormData(data => ({\n            ...data,\n            [name]: value\n        }))\n    }\n\n    return (\n        companies.length > 0 ? \n        <div>\n            <h1>Post a Job</h1>\n            {!isLoaded ? <div>Loading...</div> : null}\n            <form onSubmit={handleSubmit}>\n                <InputLabel>Company</InputLabel>\n                <Select\n                    required\n                    displayEmpty\n                    label=\"Company\"\n                    name=\"companyId\" \n                    value={formData.companyId} \n                    onChange={handleChange}>\n                    {companies.map(company => (\n                        <MenuItem value={company.id} key={company.id}>{company.name}</MenuItem>\n                    ))}\n                </Select>\n                <br></br>\n                <TextField\n                    required\n                    label=\"Position\"\n                    type=\"text\"\n                    name=\"position\"\n                    onChange={handleChange}\n                    value={formData.position}/>\n                    <br></br>\n                <TextField\n                    required\n                    label=\"Hourly Pay\"\n                    type=\"number\"\n                    min=\"14\"\n                    name=\"hourlyPay\"\n                    onChange={handleChange}\n                    value={formData.hourlyPay}/>\n                    <br></br>\n                <TextField\n                    required\n                    type=\"date\"\n                    label=\"Date\"\n                    name=\"date\"\n                    onChange={handleChange}\n                    value={formData.date}\n                    InputLabelProps={{\n                        shrink: true,\n                }}/>\n                <br></br><br></br>\n                <Button \n                    type=\"submit\"\n                    variant=\"contained\" \n                    color=\"secondary\"\n                >Post Job</Button>\n                <div>\n                    {errors.length ?\n                        <p>{errors}</p>\n                    : null }\n                </div>\n            </form>\n        </div>\n        :\n        <h1>Register a company to post a job</h1>\n    )\n}\n\nexport default JobSignUp;"]},"metadata":{},"sourceType":"module"}