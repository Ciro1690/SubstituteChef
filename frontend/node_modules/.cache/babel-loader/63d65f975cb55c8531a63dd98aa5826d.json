{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ChefApi from'../api/api';import{formatDate}from'../utilities/utility';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserApplications=function UserApplications(_ref){var currentUser=_ref.currentUser;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),applications=_useState2[0],setApplications=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setIsLoaded=_useState4[1];useEffect(function(){function getApplications(){return _getApplications.apply(this,arguments);}function _getApplications(){_getApplications=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var jobApps,userInfo,_iterator,_step,_step$value,jobId,status,job,company;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:jobApps=[];_context.prev=1;_context.next=4;return ChefApi.getUserInfo(currentUser);case 4:userInfo=_context.sent;_iterator=_createForOfIteratorHelper(userInfo.applications);_context.prev=6;_iterator.s();case 8:if((_step=_iterator.n()).done){_context.next=19;break;}_step$value=_slicedToArray(_step.value,2),jobId=_step$value[0],status=_step$value[1];_context.next=12;return ChefApi.getJob(jobId);case 12:job=_context.sent;_context.next=15;return ChefApi.getCompany(job.company_id);case 15:company=_context.sent;jobApps.push({job:job,status:status,company:company});case 17:_context.next=8;break;case 19:_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](6);_iterator.e(_context.t0);case 24:_context.prev=24;_iterator.f();return _context.finish(24);case 27:setApplications(jobApps);setIsLoaded(true);_context.next=34;break;case 31:_context.prev=31;_context.t1=_context[\"catch\"](1);console.log(_context.t1);case 34:case\"end\":return _context.stop();}}},_callee,null,[[1,31],[6,21,24,27]]);}));return _getApplications.apply(this,arguments);}getApplications();},[currentUser]);return applications.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Current Applications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container border mt-5\",children:[!isLoaded?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:applications.map(function(application){return/*#__PURE__*/_jsxs(\"div\",{className:\"col border\",children:[/*#__PURE__*/_jsx(\"h1\",{children:application.company.name}),/*#__PURE__*/_jsx(\"h4\",{children:application.company.address}),/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(\"a\",{href:application.company.url,children:application.company.url})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Application\"}),/*#__PURE__*/_jsx(\"h4\",{children:application.job.position}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"$\",application.job.hourly_pay,\"/hour\"]}),/*#__PURE__*/_jsx(\"h4\",{children:formatDate(application.job.date)}),/*#__PURE__*/_jsx(\"h4\",{children:application.status})]},application.job.id);})})]})]}):/*#__PURE__*/_jsx(\"h1\",{children:\"Apply to jobs to view applications\"});};export default UserApplications;","map":{"version":3,"sources":["/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/src/components/user/UserApplications.js"],"names":["React","useState","useEffect","ChefApi","formatDate","UserApplications","currentUser","applications","setApplications","isLoaded","setIsLoaded","getApplications","jobApps","getUserInfo","userInfo","jobId","status","getJob","job","getCompany","company_id","company","push","console","log","length","map","application","name","address","url","position","hourly_pay","date","id"],"mappings":"qvBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,OAASC,UAAT,KAA2B,sBAA3B,C,wFAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAmB,IAAjBC,CAAAA,WAAiB,MAAjBA,WAAiB,CACxC,cAAwCL,QAAQ,CAAC,EAAD,CAAhD,wCAAOM,YAAP,eAAqBC,eAArB,eACA,eAAgCP,QAAQ,CAAC,KAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eAEAR,SAAS,CAAC,UAAM,SACGS,CAAAA,eADH,uJACZ,6MACUC,OADV,CACoB,EADpB,uCAG+BT,CAAAA,OAAO,CAACU,WAAR,CAAoBP,WAApB,CAH/B,QAGcQ,QAHd,oDAIwCA,QAAQ,CAACP,YAJjD,wIAIsBQ,KAJtB,gBAI6BC,MAJ7B,uCAKkCb,CAAAA,OAAO,CAACc,MAAR,CAAeF,KAAf,CALlC,SAKsBG,GALtB,sCAMoCf,CAAAA,OAAO,CAACgB,UAAR,CAAmBD,GAAG,CAACE,UAAvB,CANpC,SAMoBC,OANpB,eAOgBT,OAAO,CAACU,IAAR,CAAa,CAAEJ,GAAG,CAAHA,GAAF,CAAOF,MAAM,CAANA,MAAP,CAAeK,OAAO,CAAPA,OAAf,CAAb,EAPhB,0NASYb,eAAe,CAACI,OAAD,CAAf,CACAF,WAAW,CAAC,IAAD,CAAX,CAVZ,iFAcQa,OAAO,CAACC,GAAR,cAdR,kFADY,kDAkBZb,eAAe,GAClB,CAnBQ,CAmBN,CAACL,WAAD,CAnBM,CAAT,CAqBA,MACIC,CAAAA,YAAY,CAACkB,MAAb,CAAsB,CAAtB,cACA,aAAK,SAAS,CAAC,MAAf,wBACI,4CADJ,cAEI,aAAK,SAAS,CAAC,uBAAf,WACK,CAAChB,QAAD,cAAY,mCAAZ,CAAoC,IADzC,cAEI,YAAK,SAAS,CAAC,KAAf,UACKF,YAAY,CAACmB,GAAb,CAAiB,SAAAC,WAAW,qBACzB,aAAK,SAAS,CAAC,YAAf,wBACI,oBAAKA,WAAW,CAACN,OAAZ,CAAoBO,IAAzB,EADJ,cAEI,oBAAKD,WAAW,CAACN,OAAZ,CAAoBQ,OAAzB,EAFJ,cAGI,iCAAI,UAAG,IAAI,CAAEF,WAAW,CAACN,OAAZ,CAAoBS,GAA7B,UAAmCH,WAAW,CAACN,OAAZ,CAAoBS,GAAvD,EAAJ,EAHJ,cAII,mCAJJ,cAKI,oBAAKH,WAAW,CAACT,GAAZ,CAAgBa,QAArB,EALJ,cAMI,0BAAMJ,WAAW,CAACT,GAAZ,CAAgBc,UAAtB,WANJ,cAOI,oBAAK5B,UAAU,CAACuB,WAAW,CAACT,GAAZ,CAAgBe,IAAjB,CAAf,EAPJ,cAQI,oBAAKN,WAAW,CAACX,MAAjB,EARJ,GAAiCW,WAAW,CAACT,GAAZ,CAAgBgB,EAAjD,CADyB,EAA5B,CADL,EAFJ,GAFJ,GADA,cAsBA,0DAvBJ,CAyBH,CAlDD,CAoDA,cAAe7B,CAAAA,gBAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ChefApi from '../api/api';\nimport { formatDate } from '../utilities/utility'; \n\nconst UserApplications = ({currentUser}) => {\n    const [applications, setApplications] = useState([]);\n    const [isLoaded, setIsLoaded] = useState(false);\n\n    useEffect(() => {\n        async function getApplications() {\n            const jobApps = [];\n            try {\n                const userInfo = await ChefApi.getUserInfo(currentUser)\n                    for (let [jobId, status] of userInfo.applications) {\n                        const job = await ChefApi.getJob(jobId);\n                        let company = await ChefApi.getCompany(job.company_id)\n                        jobApps.push({ job, status, company });\n                    }\n                    setApplications(jobApps)\n                    setIsLoaded(true);\n\n            }\n            catch (err) {\n                console.log(err)\n            }\n        }\n        getApplications();\n    }, [currentUser]);\n\n    return (\n        applications.length > 0 ?\n        <div className=\"mt-3\">\n            <h1>Current Applications</h1>\n            <div className=\"container border mt-5\">\n                {!isLoaded ? <div>Loading...</div> : null}\n                <div className=\"row\">\n                    {applications.map(application => (\n                        <div className=\"col border\" key={application.job.id}>\n                            <h1>{application.company.name}</h1>\n                            <h4>{application.company.address}</h4>\n                            <h4><a href={application.company.url}>{application.company.url}</a></h4>\n                            <h2>Application</h2>\n                            <h4>{application.job.position}</h4>\n                            <h4>${application.job.hourly_pay}/hour</h4>\n                            <h4>{formatDate(application.job.date)}</h4>\n                            <h4>{application.status}</h4>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n        : \n        <h1>Apply to jobs to view applications</h1>\n    )\n}\n\nexport default UserApplications;"]},"metadata":{},"sourceType":"module"}