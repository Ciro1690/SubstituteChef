{"ast":null,"code":"import _defineProperty from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{TextField,Button,ButtonGroup}from'@material-ui/core';import Box from'@material-ui/core/Box';import DeleteIcon from'@material-ui/icons/Delete';import SaveIcon from'@material-ui/icons/Save';import ChefApi from'../api/api';import{useHistory}from'react-router';import{editCompany}from'../utilities/utility';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditCompany=function EditCompany(_ref){var company=_ref.company;var id=company.id,name=company.name,address=company.address,url=company.url;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var history=useHistory();useEffect(function(){if(company!==null){setFormData({name:name,url:url,address:address});}},[company,name,url,address]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var editData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();editData={\"name\":formData.name,\"address\":formData.address,\"url\":formData.url};_context.next=4;return editCompany(id,editData).then(function(res){if(res.success){var NEW_STATE={\"name\":res.company.name,\"address\":res.company.address,\"url\":res.company.url};setFormData(function(data){return _objectSpread(_objectSpread({},data),NEW_STATE);});alert(\"Updated company info\");}else{setErrors(res.errors);}});case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});};var deleteCompany=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return ChefApi.deleteCompany(id);case 3:alert(\"Deleted company. Sorry to see you go!\");history.push('/');_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);setErrors(\"Unable to delete company\");case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function deleteCompany(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"col border rounded mt-3\",children:formData===null?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"name\",type:\"text\",name:\"name\",onChange:handleChange,value:formData.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{label:\"URL\",type:\"text\",name:\"url\",onChange:handleChange,value:formData.url}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{label:\"Address\",type:\"text\",name:\"address\",onChange:handleChange,value:formData.address}),/*#__PURE__*/_jsx(Box,{m:2,p:3,children:/*#__PURE__*/_jsxs(ButtonGroup,{size:\"small\",\"aria-label\":\"small outlined button group\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"secondary\",className:\"btn mr-2\",startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),children:\"Edit Company\"}),/*#__PURE__*/_jsx(Button,{onClick:deleteCompany,variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),children:\"Delete Company\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{children:errors.length?/*#__PURE__*/_jsx(\"p\",{children:errors}):null})]})});};export default EditCompany;","map":{"version":3,"sources":["/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/src/components/companies/EditCompany.js"],"names":["React","useEffect","useState","TextField","Button","ButtonGroup","Box","DeleteIcon","SaveIcon","ChefApi","useHistory","editCompany","EditCompany","company","id","name","address","url","formData","setFormData","errors","setErrors","history","handleSubmit","e","preventDefault","editData","then","res","success","NEW_STATE","data","alert","handleChange","target","value","deleteCompany","push","console","log","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n    TextField,\n    Button,\n    ButtonGroup } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ChefApi from '../api/api';\nimport { useHistory } from 'react-router';\nimport { editCompany } from '../utilities/utility';\n\nconst EditCompany = ({ company }) => {\n    const { id, name, address, url } = company\n    const [formData, setFormData] = useState(null);\n    const [errors, setErrors] = useState([]);\n    let history = useHistory();\n    \n    useEffect(() => {\n        if (company !== null) {\n            setFormData({\n                name: name,\n                url: url,\n                address: address,\n            });\n        }\n    }, [company, name, url, address])\n\n    \n    const handleSubmit = async e => {\n        e.preventDefault();\n        const editData = {\n            \"name\": formData.name,\n            \"address\": formData.address,\n            \"url\": formData.url,\n        };\n        await editCompany(id, editData)\n            .then((res) => {\n                if (res.success) {\n                    const NEW_STATE = {\n                        \"name\": res.company.name,\n                        \"address\": res.company.address,\n                        \"url\": res.company.url\n                    }\n                    setFormData(data => ({\n                        ...data,\n                        ...NEW_STATE\n                    }))\n                    alert(\"Updated company info\")\n                }\n                else {\n                    setErrors(res.errors);\n                }\n         })\n    }\n\n    const handleChange = e => {\n        const { name, value } = e.target;\n        setFormData(data => ({\n            ...data,\n            [name]: value\n        }))\n    }\n\n    const deleteCompany = async () => {\n        try {\n            await ChefApi.deleteCompany(id)\n            alert(`Deleted company. Sorry to see you go!`)\n            history.push('/')\n        }\n        catch (err) {\n            console.log(err)\n            setErrors(`Unable to delete company`)\n        }\n    }\n\n    return (\n        <div className=\"col border rounded mt-3\">\n        {formData === null  ? <p>Loading...</p> :\n            <div>\n                <h2>{name}</h2>\n                <form onSubmit={handleSubmit}>\n                    <TextField\n                        label=\"name\"\n                        type=\"text\"\n                        name=\"name\"\n                        onChange={handleChange}\n                        value={formData.name}/>\n                    <br></br>\n                    <TextField\n                        label=\"URL\"\n                        type=\"text\"\n                        name=\"url\"\n                        onChange={handleChange}\n                        value={formData.url}/>\n                        <br></br>\n                    <TextField\n                        label=\"Address\"\n                        type=\"text\"\n                        name=\"address\"\n                        onChange={handleChange}\n                        value={formData.address}/>\n                    <Box m={2} p={3}>\n                        <ButtonGroup size=\"small\" aria-label=\"small outlined button group\">\n                            <Button \n                                type=\"submit\"\n                                variant=\"contained\" \n                                color=\"secondary\"\n                                className=\"btn mr-2\"\n                                startIcon={<SaveIcon />}>\n                                Edit Company\n                            </Button>                    \n                            <Button \n                                onClick={deleteCompany}\n                                variant=\"contained\" \n                                color=\"primary\"\n                                startIcon={<DeleteIcon />}>\n                                Delete Company\n                            </Button>\n                        </ButtonGroup>\n                    </Box>\n                </form>\n                <div>\n                    {errors.length ?\n                        <p>{errors}</p>\n                        : null }\n                </div>\n            </div>\n        }\n        </div>\n    )\n}\n\nexport default EditCompany;"]},"metadata":{},"sourceType":"module"}