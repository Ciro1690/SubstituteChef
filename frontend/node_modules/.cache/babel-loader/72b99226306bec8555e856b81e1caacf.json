{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{Button}from'@material-ui/core';import UserContext from'../routes/UserContext';import ChefApi from'../api/api';import{formatDate}from'../utilities/utility';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var JobCard=function JobCard(_ref){var job=_ref.job;var _useContext=useContext(UserContext),currentUser=_useContext.currentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),applied=_useState2[0],setApplied=_useState2[1];var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userInfo,applications,newJobId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ChefApi.getUserInfo(currentUser);case 2:userInfo=_context.sent;applications=userInfo.applications;_context.next=6;return ChefApi.applyToJob(currentUser,job.id);case 6:newJobId=_context.sent;if(!applications.includes(newJobId)){setApplied(true);alert(\"Applied to \".concat(job.position));}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleClick(){return _ref2.apply(this,arguments);};}();useEffect(function(){function getApplications(){return _getApplications.apply(this,arguments);}function _getApplications(){_getApplications=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var userInfo;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return ChefApi.getUserInfo(currentUser);case 2:userInfo=_context2.sent;if(userInfo.applications.length>0&&userInfo.applications[0].includes(job.id)){setApplied(true);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getApplications.apply(this,arguments);}getApplications();},[currentUser,job.id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"col text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{children:job.position}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"$\",job.hourly_pay,\"/hour\"]}),/*#__PURE__*/_jsx(\"h4\",{children:formatDate(job.date)}),applied?/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",children:\"Applied\"}):/*#__PURE__*/_jsx(Button,{onClick:handleClick,variant:\"contained\",color:\"secondary\",children:\"Apply\"})]});};export default JobCard;","map":{"version":3,"sources":["/Users/cheers/Desktop/Coding/Springboard/substitute-chef/frontend/src/components/home/JobCard.js"],"names":["React","useContext","useEffect","useState","Button","UserContext","ChefApi","formatDate","JobCard","job","currentUser","applied","setApplied","handleClick","getUserInfo","userInfo","applications","applyToJob","id","newJobId","includes","alert","position","getApplications","length","hourly_pay","date"],"mappings":"qiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,OAASC,UAAT,KAA2B,sBAA3B,C,wFAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAAa,IAAVC,CAAAA,GAAU,MAAVA,GAAU,CACzB,gBAAwBR,UAAU,CAACI,WAAD,CAAlC,CAAQK,WAAR,aAAQA,WAAR,CACA,cAA8BP,QAAQ,CAAC,KAAD,CAAtC,wCAAOQ,OAAP,eAAgBC,UAAhB,eAEI,GAAMC,CAAAA,WAAW,2FAAG,4LACOP,CAAAA,OAAO,CAACQ,WAAR,CAAoBJ,WAApB,CADP,QACVK,QADU,eAEVC,YAFU,CAEKD,QAAQ,CAACC,YAFd,uBAGOV,CAAAA,OAAO,CAACW,UAAR,CAAmBP,WAAnB,CAAgCD,GAAG,CAACS,EAApC,CAHP,QAGVC,QAHU,eAIpB,GAAI,CAACH,YAAY,CAACI,QAAb,CAAsBD,QAAtB,CAAL,CAAsC,CAClCP,UAAU,CAAC,IAAD,CAAV,CACAS,KAAK,sBAAeZ,GAAG,CAACa,QAAnB,EAAL,CACH,CAPmB,sDAAH,kBAAXT,CAAAA,WAAW,2CAAjB,CAUJX,SAAS,CAAC,UAAM,SACGqB,CAAAA,eADH,uJACZ,4KAC2BjB,CAAAA,OAAO,CAACQ,WAAR,CAAoBJ,WAApB,CAD3B,QACUK,QADV,gBAEI,GAAIA,QAAQ,CAACC,YAAT,CAAsBQ,MAAtB,CAA+B,CAA/B,EAAoCT,QAAQ,CAACC,YAAT,CAAsB,CAAtB,EAAyBI,QAAzB,CAAkCX,GAAG,CAACS,EAAtC,CAAxC,CAAmF,CAC/EN,UAAU,CAAC,IAAD,CAAV,CACH,CAJL,wDADY,kDAOZW,eAAe,GAClB,CARQ,CAQN,CAACb,WAAD,CAAcD,GAAG,CAACS,EAAlB,CARM,CAAT,CAWA,mBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,oBAAKT,GAAG,CAACa,QAAT,EADJ,cAEI,0BAAMb,GAAG,CAACgB,UAAV,WAFJ,cAGI,oBAAKlB,UAAU,CAACE,GAAG,CAACiB,IAAL,CAAf,EAHJ,CAIKf,OAAO,cACR,KAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,KAAK,CAAC,SAAlC,qBADQ,cAGR,KAAC,MAAD,EAAQ,OAAO,CAAEE,WAAjB,CAA8B,OAAO,CAAC,WAAtC,CAAkD,KAAK,CAAC,WAAxD,mBAPJ,GADJ,CAYH,CArCD,CAuCA,cAAeL,CAAAA,OAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Button } from '@material-ui/core'; \nimport UserContext from '../routes/UserContext';\nimport ChefApi from '../api/api';\nimport { formatDate } from '../utilities/utility';\n\nconst JobCard = ({ job }) => {\n    const { currentUser } = useContext(UserContext);\n    const [applied, setApplied] = useState(false);\n\n        const handleClick = async () => {\n            const userInfo = await ChefApi.getUserInfo(currentUser)\n            const applications = userInfo.applications\n            const newJobId = await ChefApi.applyToJob(currentUser, job.id)\n        if (!applications.includes(newJobId)) {\n            setApplied(true)\n            alert(`Applied to ${job.position}`)\n        }\n    }\n    \n    useEffect(() => {\n        async function getApplications() {\n            const userInfo = await ChefApi.getUserInfo(currentUser)\n            if (userInfo.applications.length > 0 && userInfo.applications[0].includes(job.id)) {\n                setApplied(true)\n            }\n        }\n        getApplications()\n    }, [currentUser, job.id])\n    \n\n    return (\n        <div className=\"col text-center\">\n            <h4>{job.position}</h4>\n            <h4>${job.hourly_pay}/hour</h4>\n            <h4>{formatDate(job.date)}</h4>\n            {applied ?\n            <Button variant=\"contained\" color=\"primary\">Applied</Button>\n            :\n            <Button onClick={handleClick} variant=\"contained\" color=\"secondary\">Apply</Button>\n            }\n        </div> \n    )\n}\n\nexport default JobCard;"]},"metadata":{},"sourceType":"module"}